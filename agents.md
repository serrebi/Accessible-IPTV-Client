You are a professional windows python developer with a decade of IPTV app experience. Always fully investigate things before applying a fix. If you learn anything new, write it in this file.
You are root and you can install and use whatever you need to on windows or with pip3. You can use any package manager, like winget, pip3, or anything you need.
Project=Accessible IPTV Client (wxPython GUI) focused on playlists+EPG; main.py spins wx frame, tray icon, playlist/EPG managers, background threads (playlist load, EPG import) and uses options.py for config persistence + cache dirs.
Data: playlist.py maintains sqlite3 WAL db (/tmp/epg.db) with channels/programmes tables, busy_timeout=20s, BEGIN IMMEDIATE + reopen-on-lock retry, commits in 10k batches, trims old rows, logs to /tmp/iptvclient_epg_debug.log, and downloads XMLTV/ GZip sources with resume+HTTP416 fallback.
Providers: providers.py offers XtreamCodesClient + StalkerPortalClient to build playlist+EPG URLs, handle auth tokens, and surface ProviderError.
Config: options.py manages JSON config (portable fallback + wx StandardPaths), exposes save/load, cache path hashing, canonical naming helpers via options.load_config.
Utility: playlist.py also handles channel matching heuristics (regions, brand tokens, HBO variants, timeshift), now/next queries, recent programmes, and uses psutil when available for memory stats; main.py formats now/next and catch-up displays using the system timezone.
Deps: wxPython>=4.2.1 (GUI), psutil optional for memory telemetry; stdlib otherwise.

Update 2025-11-12: wx.LogError uses printf-style formatting, so any literal % signs must be escaped (message.replace("%", "%%")) before calling it to avoid mangled output.
Update 2025-11-12: Built-in VLC player was flipping into restart/Stream Lost loops because we counted every buffering blip as "choppy" and the retry counter never decayed; now only buffering events >=1.25s count and reconnect attempts reset after ~2 minutes without retries so channels stop dropping for minor hiccups.
Update 2025-11-12: Xtream-style `.ts` channels now request a much deeper network/file cache (>=18s) so steady buffers soak up server jitter without extra restarts; live caching stays high but capped by the `internal_player_max_buffer_seconds` config value.
Update 2025-11-12: Noticed Xtream `.ts` live channels actually terminate the HTTP response every ~60 MB even though they should be endless, so libVLC reported a clean "Ended" state and stopped playback; we now tag built-in player launches as live vs catch-up and force automatic restarts for Xtream-style `.ts` live URLs so they reopen immediately after each server-side EOF instead of disconnecting the viewer, and those refreshes no longer burn reconnect-attempt budget.
